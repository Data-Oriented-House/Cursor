"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[671],{3905:(e,t,r)=>{r.d(t,{Zo:()=>f,kt:()=>c});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=a.createContext({}),u=function(e){var t=a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},f=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,f=l(e,["components","mdxType","originalType","parentName"]),p=u(r),h=n,c=p["".concat(s,".").concat(h)]||p[h]||d[h]||i;return r?a.createElement(c,o(o({ref:t},f),{},{components:r})):a.createElement(c,o({ref:t},f))}));function c(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,o=new Array(i);o[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:n,o[1]=l;for(var u=2;u<i;u++)o[u]=r[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,r)}h.displayName="MDXCreateElement"},59881:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var a=r(87462),n=(r(67294),r(3905));const i={sidebar_position:1},o="Installation",l={unversionedId:"intro",id:"intro",title:"Installation",description:"Source",source:"@site/docs/intro.md",sourceDirName:".",slug:"/intro",permalink:"/Cursor/docs/intro",draft:!1,editUrl:"https://github.com/Data-Oriented-House/Cursor/edit/main/docs/intro.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"defaultSidebar",next:{title:"Getting Started",permalink:"/Cursor/docs/Tutorial"}},s={},u=[{value:"Source",id:"source",level:2},{value:"Wally",id:"wally",level:2},{value:"Why Cursor?",id:"why-cursor",level:2},{value:"Non Powers Of 2",id:"non-powers-of-2",level:3},{value:"Offsets And Variable Size",id:"offsets-and-variable-size",level:3},{value:"Alternatives",id:"alternatives",level:2}],f={toc:u},p="wrapper";function d(e){let{components:t,...r}=e;return(0,n.kt)(p,(0,a.Z)({},f,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"installation"},"Installation"),(0,n.kt)("h2",{id:"source"},"Source"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Go to the ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/Data-Oriented-House/Cursor/blob/main/src/init.luau"},"github"),"."),(0,n.kt)("li",{parentName:"ol"},"Copy the raw contents."),(0,n.kt)("li",{parentName:"ol"},"Paste in your project.")),(0,n.kt)("h2",{id:"wally"},"Wally"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Go to the ",(0,n.kt)("a",{parentName:"li",href:"https://wally.run/package/data-oriented-house/cursor"},"wally website"),"."),(0,n.kt)("li",{parentName:"ol"},"Select the most recent or your preferred version."),(0,n.kt)("li",{parentName:"ol"},"Click and copy the version link."),(0,n.kt)("li",{parentName:"ol"},"Go to your ",(0,n.kt)("inlineCode",{parentName:"li"},"wally.toml")," file under ",(0,n.kt)("inlineCode",{parentName:"li"},"[Dependencies]")," and paste it.")),(0,n.kt)("h2",{id:"why-cursor"},"Why Cursor?"),(0,n.kt)("p",null,"To utilize Cursor, you must understand what problem it tries to solve, and what alternatives exist. To begin, the ",(0,n.kt)("a",{parentName:"p",href:"https://luau-lang.org/library#buffer-library"},"buffer")," library allows Luau users to manipulate arrays of bytes with the ",(0,n.kt)("inlineCode",{parentName:"p"},"buffer")," type. These arrays of bytes are called Buffers. These are the old-school definitions of arrays, allocated with a fixed size that doesn't change after creation. As a user of the buffer library you are provided with useful methods such as ",(0,n.kt)("inlineCode",{parentName:"p"},"buffer.writeu8(buffer, offset, value)"),", which will write into the ",(0,n.kt)("inlineCode",{parentName:"p"},"given buffer")," an ",(0,n.kt)("inlineCode",{parentName:"p"},"8 bit unsigned integer")," with the ",(0,n.kt)("inlineCode",{parentName:"p"},"given value")," at the ",(0,n.kt)("inlineCode",{parentName:"p"},"given offset"),' or "index." This api is great at providing low-level access to managing memory formats and sizes, which is crucial for applications requiring optimizing the size of data like networking or data storage. However, the api is not very forgiving when it comes to day-to-day use of packing data whenever you feel like it.'),(0,n.kt)("h3",{id:"non-powers-of-2"},"Non Powers Of 2"),(0,n.kt)("p",null,"To start, if you only need a 3 byte unsigned integer, you have to mentally convert that 3 bytes to 24 bits, then learn there is no ",(0,n.kt)("inlineCode",{parentName:"p"},"buffer.writeu24"),'. You then go "fine" and do both a ',(0,n.kt)("inlineCode",{parentName:"p"},"buffer.writeu8")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"buffer.write16")," right after, but now have to remember arithmetic bitshifting to write the correct bytes in the correct order. Cool, let's say you did this. Now the code somewhere completely different that needs to read this data needs to do it all over again but in reverse. Not appealing to say the least."),(0,n.kt)("h3",{id:"offsets-and-variable-size"},"Offsets And Variable Size"),(0,n.kt)("p",null,"Another cause of concern is needing to manually keep track of offsets if you plan to store multiple values into a buffer. Ok write a u8 at 0. Now write a f64 at 1. Now write an i32 at 2 and you get an access error because that 2 is supposed to be a 9. Ok, sure, you can do arithmetic, but now you need to write a string or other variable-sized data. How do you know how many bytes to offset or how how many bytes to allocate the buffer if you don't know the string? Ok we can first get the length of the string, write that as a u8 at 9, then write the string after. Awesome, out of bounds access error. The string was longer than 255 characters so let's use a u16 to store the length instead. That works, but yet another out of bounds access error. Our buffer is too small and we used all our space. Let's wait until we run out of space and then make a bigger buffer and copy it over. How much bigger? That's a lot going on now. Say we figured it all out, now I need to serialize another data packet and this string is only 3 characters long meaning a u16 is wasting a byte of space. The problems don't seem to stop!"),(0,n.kt)("h2",{id:"alternatives"},"Alternatives"),(0,n.kt)("p",null,"Do you see the issues? ",(0,n.kt)("a",{parentName:"p",href:"https://luau-lang.org/library#buffer-library"},"buffer")," is a wonderful but tedious and low-level library meant to be built upon. So we did. We are not the only ones to do this though, our friends at ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/red-blox"},"Redblox")," made a utility called ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/red-blox/Util/blob/main/libs/Buffit/Buffit.luau"},"Buffit")," that takes a stab at solving the previously stated problems with practical type coverage and runtime serdes implementations. Both Cursor and ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/red-blox/Util/blob/main/libs/Buffit/Buffit.luau"},"Buffit"),' use a "Cursor" object and push / pop data from the cursor. Another is ',(0,n.kt)("a",{parentName:"p",href:"https://data-oriented-house.github.io/Squash/"},"Squash"),", which is much larger and more comprehensive focusing on compressing any kind of Luau and Roblox data into buffers as small as possible. Version 2 is rewritten on top of an inlined version of this library, Cursor, demonstrating its efficiency and practicality."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"center"},"Category"),(0,n.kt)("th",{parentName:"tr",align:"center"},"Least"),(0,n.kt)("th",{parentName:"tr",align:"center"},"Less"),(0,n.kt)("th",{parentName:"tr",align:"center"},"More"),(0,n.kt)("th",{parentName:"tr",align:"center"},"Most"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"API Complexity"),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://luau-lang.org/library#buffer-library"},"buffer")),(0,n.kt)("td",{parentName:"tr",align:"center"},"Cursor"),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://github.com/red-blox/Util/blob/main/libs/Buffit/Buffit.luau"},"Buffit")),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://data-oriented-house.github.io/Squash/"},"Squash"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"Size Coverage"),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://luau-lang.org/library#buffer-library"},"buffer")),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://github.com/red-blox/Util/blob/main/libs/Buffit/Buffit.luau"},"Buffit")),(0,n.kt)("td",{parentName:"tr",align:"center"},"Cursor"),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://data-oriented-house.github.io/Squash/"},"Squash"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"Type Coverage"),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://luau-lang.org/library#buffer-library"},"buffer")),(0,n.kt)("td",{parentName:"tr",align:"center"},"Cursor"),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://github.com/red-blox/Util/blob/main/libs/Buffit/Buffit.luau"},"Buffit")),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://data-oriented-house.github.io/Squash/"},"Squash"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"Overhead"),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://luau-lang.org/library#buffer-library"},"buffer")),(0,n.kt)("td",{parentName:"tr",align:"center"},"Cursor"),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://github.com/red-blox/Util/blob/main/libs/Buffit/Buffit.luau"},"Buffit")),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://data-oriented-house.github.io/Squash/"},"Squash"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"File Size"),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://luau-lang.org/library#buffer-library"},"buffer")),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://github.com/red-blox/Util/blob/main/libs/Buffit/Buffit.luau"},"Buffit")),(0,n.kt)("td",{parentName:"tr",align:"center"},"Cursor"),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("a",{parentName:"td",href:"https://data-oriented-house.github.io/Squash/"},"Squash"))))))}d.isMDXComponent=!0}}]);